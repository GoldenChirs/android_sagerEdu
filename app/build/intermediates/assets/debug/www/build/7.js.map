{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/auth/auth.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    SharedModule\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\nimport { ISubscription } from 'rxjs/Subscription';\nimport { UserService } from '../../shared/';\nimport { SettingProvider } from '../../providers/setting/setting';\n\n/**\n * Generated class for the AuthPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n// a super page that handle auth and network error..\n\n@IonicPage()\n@Component({\n  selector: 'page-auth',\n  templateUrl: 'auth.html',\n})\nexport class AuthPage {\n\n  protected isAuthenticatedSubscription : ISubscription ;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, protected userService : UserService) {\n  }\n\n  ionViewWillLoad(){\n    console.log('view will load call by auth page')\n    this.isAuthenticatedSubscription = this.userService.isAuthenticated.subscribe(\n      isAuth => {\n          if(!isAuth){\n            this.isNotAuthenticated();\n          }else{\n            this.isAuthenticated();\n          } \n      },\n      error => {\n          //console.log('auth page fail to authenticate' + error);\n      });\n  }\n\n\n  protected isNotAuthenticated(){\n    //this.navCtrl.popToRoot();\n    //this.navCtrl.setRoot(SettingProvider.pageSettings.LoginPage.componentName); \n    \n  }\n\n  protected isAuthenticated(){\n  }\n\n\n  ionViewCanLeave(){\n    //console.log('auth page fun subscribe' );\n    this.isAuthenticatedSubscription.unsubscribe();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/auth/auth.ts","import { Component  } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { SettingProvider } from '../../providers/setting/setting';\nimport { UserService, User, CommonService, StorageService } from '../../shared/';\nimport { AuthPage } from '../auth/auth';\n\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage extends AuthPage{\n\n  username: string = '';\n  password: string = '';\n  orgName: String = '';\n  loginAttempt : boolean;\n  viewloader : any;\n\n  header_title:any;\n  constructor(public navCtrl: NavController, public navParams: NavParams, protected userService: UserService, private commonService : CommonService,\n    private storageService : StorageService  \n  ) {\n    \n    super(navCtrl,navParams,userService)\n    this.header_title = SettingProvider.pageSettings.LoginPage.pageTitle\n    this.orgName = SettingProvider.organization;\n    this.loginAttempt = false;\n    this.storageService.retrieveValueByKey(SettingProvider.appStorageKeys.ISAUTH).then(\n      user =>\n      {\n        console.log(user)\n        if(user){\n          this.login(user);\n        }\n       \n      }\n    );\n  }\n\n  login(u: User) {\n    let user = u;\n    if(!user){\n      user = new User()\n      user.username = this.username\n      user.password = this.password\n    }\n   \n    this.viewloader =  this.commonService.presentLoading();\n    this.loginAttempt = true;\n    console.log(user)\n    this.userService.authenticate(user)\n    .subscribe(\n      user => {\n        this.loginAttempt = true;\n        //this.storageService.storeValueByKey(SettingProvider.appStorageKeys.ISAUTH, user);\n      },\n      error => {\n        this.commonService.dismissLoading(this.viewloader )\n        this.commonService.presentNetWorkRequestError()\n      },\n      () =>{\n       // this.commonService.dismissLoading(loader)\n      }\n    );\n      \n  }\n\n  protected isAuthenticated(){\n    console.log('is auth')\n    this.navCtrl.push(SettingProvider.pageSettings.TabsPage.componentName);\n  }\n\n  protected isNotAuthenticated(){\n    if(this.loginAttempt){\n      this.commonService.dismissLoading(this.viewloader );\n      this.commonService.presentAlert(\"Login Fail\", \"Invalid username and password\");\n    }\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}